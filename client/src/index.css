@tailwind base;
@tailwind components;
@tailwind utilities;

/* Performance: Reduce repaints and enable GPU acceleration */
* {
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

/* Reduce HMR flashing */
#root {
  transition: opacity 0.15s ease-in-out;
  min-height: 100vh;
  min-height: 100dvh; /* Dynamic viewport height for mobile */
}

/* Custom animations - GPU accelerated */
@keyframes fadeIn {
  from {
    opacity: 0;
    transform: translateY(10px) translateZ(0);
  }
  to {
    opacity: 1;
    transform: translateY(0) translateZ(0);
  }
}

.animate-fadeIn {
  animation: fadeIn 0.6s ease-out forwards;
  will-change: opacity, transform;
}

@layer base {
  :root {
    --primary-dark: 218 80% 22%;
  }

  * {
    @apply border-border;
  }

  body {
    @apply font-sans antialiased bg-background text-foreground;
    /* Mobile-first touch optimization */
    -webkit-tap-highlight-color: transparent;
    touch-action: manipulation;
  }
  
  /* Mobile-first: Optimize images for performance */
  img {
    @apply max-w-full h-auto;
    image-rendering: -webkit-optimize-contrast;
    image-rendering: crisp-edges;
  }
  
  /* Mobile-first: Prevent text size adjustment on orientation change */
  html {
    -webkit-text-size-adjust: 100%;
    text-size-adjust: 100%;
  }
}

@layer components {
  /* Global styling for all code blocks */
  pre {
    @apply whitespace-pre-wrap break-words max-w-full;
    overflow-wrap: break-word;
  }
  
  /* Make all code containers handle overflow properly */
  .bg-gray-100, .bg-gray-800 {
    @apply overflow-x-auto;
  }
  
  /* Ensure card content doesn't overflow */
  .card-content {
    @apply overflow-hidden;
  }
  
  /* Fix for specific dashboard examples */
  .code-block {
    @apply overflow-x-auto;
  }
  
  .code-block pre {
    @apply whitespace-pre-wrap;
  }
}

@layer utilities {
  /* Mobile-first: Safe area insets for notched devices */
  .safe-top {
    padding-top: env(safe-area-inset-top);
  }
  
  .safe-bottom {
    padding-bottom: env(safe-area-inset-bottom);
  }
  
  .safe-left {
    padding-left: env(safe-area-inset-left);
  }
  
  .safe-right {
    padding-right: env(safe-area-inset-right);
  }
  
  /* Performance: GPU-accelerated transforms */
  .gpu-accelerated {
    transform: translateZ(0);
    will-change: transform;
  }
  
  /* Mobile-first: Touch-friendly click targets (min 44x44px) */
  .touch-target {
    @apply min-h-[44px] min-w-[44px] inline-flex items-center justify-center;
  }
  
  /* Mobile-first: Optimized container widths */
  .container-mobile {
    @apply w-full px-4 mx-auto;
    max-width: 100%;
  }
  
  @media (min-width: 640px) {
    .container-mobile {
      @apply px-6;
      max-width: 640px;
    }
  }
  
  @media (min-width: 768px) {
    .container-mobile {
      max-width: 768px;
    }
  }
  
  @media (min-width: 1024px) {
    .container-mobile {
      @apply px-8;
      max-width: 1024px;
    }
  }
  
  /* Mobile-first: Responsive typography */
  .text-responsive-sm {
    font-size: clamp(0.875rem, 2vw, 1rem);
  }
  
  .text-responsive {
    font-size: clamp(1rem, 2.5vw, 1.125rem);
  }
  
  .text-responsive-lg {
    font-size: clamp(1.25rem, 3vw, 1.5rem);
  }
  
  .text-responsive-xl {
    font-size: clamp(1.5rem, 4vw, 2rem);
  }
  
  .text-responsive-2xl {
    font-size: clamp(2rem, 5vw, 3rem);
  }
  
  /* Performance: Reduce layout shift */
  .aspect-video {
    aspect-ratio: 16 / 9;
  }
  
  .aspect-square {
    aspect-ratio: 1 / 1;
  }
  
  /* Mobile-first: Scrollable sections with momentum */
  .scroll-smooth-mobile {
    -webkit-overflow-scrolling: touch;
    scroll-behavior: smooth;
  }
}