EMERGENCY MISSION: Fix Supabase Schema for Autonomous Coordination

CURRENT PROBLEM:
- Agents can't coordinate because database schema is broken/missing
- Need working shared task queue for autonomous operation
- Sean is recovering from injury - system must work WITHOUT manual prompting

YOUR TASK (Complete in 90 minutes):

1. CONNECT TO SUPABASE
   - Project URL: https://qnprjhlxljtqyigedwkb.supabase.co
   - Get anon key from Sean (or check your environment variables)
   - Test connection by reading from ANY existing table
   - Confirm: "Connected successfully to Supabase"

2. CHECK EXISTING SCHEMA
   - List all tables currently in database
   - For each table, show columns + data types
   - Identify: Which tables exist? Which are missing?
   - Log findings to GitHub: `schema_audit_[timestamp].md`

3. CREATE MINIMAL WORKING SCHEMA
   Execute this SQL (adapt if some tables already exist):
```sql
   -- Core task queue table
   CREATE TABLE IF NOT EXISTS trinity_tasks (
     id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
     created_at TIMESTAMPTZ DEFAULT NOW(),
     task_description TEXT NOT NULL,
     status TEXT DEFAULT 'PENDING',
     assigned_agent TEXT,
     priority FLOAT DEFAULT 0.5,
     certainty_score FLOAT,
     started_at TIMESTAMPTZ,
     completed_at TIMESTAMPTZ,
     result_summary TEXT,
     created_by TEXT DEFAULT 'system'
   );

   -- Agent status tracking
   CREATE TABLE IF NOT EXISTS agent_status (
     agent_name TEXT PRIMARY KEY,
     status TEXT DEFAULT 'IDLE',
     current_task_id UUID REFERENCES trinity_tasks(id),
     last_heartbeat TIMESTAMPTZ DEFAULT NOW(),
     rep_score FLOAT DEFAULT 75.0,
     tasks_completed INT DEFAULT 0,
     is_orchestrator BOOLEAN DEFAULT FALSE
   );

   -- Orchestrator rotation tracking
   CREATE TABLE IF NOT EXISTS orchestrator_cycles (
     id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
     cycle_number INT NOT NULL,
     orchestrator_name TEXT NOT NULL,
     started_at TIMESTAMPTZ DEFAULT NOW(),
     ended_at TIMESTAMPTZ,
     tasks_assigned INT DEFAULT 0
   );

   -- Enable Row Level Security (but allow all for now - we'll tighten later)
   ALTER TABLE trinity_tasks ENABLE ROW LEVEL SECURITY;
   ALTER TABLE agent_status ENABLE ROW LEVEL SECURITY;
   ALTER TABLE orchestrator_cycles ENABLE ROW LEVEL SECURITY;

   -- Permissive policies for MVP (tighten in production)
   CREATE POLICY "Allow all operations for now" ON trinity_tasks FOR ALL USING (true);
   CREATE POLICY "Allow all operations for now" ON agent_status FOR ALL USING (true);
   CREATE POLICY "Allow all operations for now" ON orchestrator_cycles FOR ALL USING (true);
```

4. TEST THE SCHEMA
   Write a test task:
```javascript
   const testTask = await supabase
     .from('trinity_tasks')
     .insert({
       task_description: 'TEST: Schema verification task',
       status: 'PENDING',
       priority: 1.0,
       created_by: 'HDM'
     })
     .select();
```

   Read it back:
```javascript
   const tasks = await supabase
     .from('trinity_tasks')
     .select('*')
     .eq('status', 'PENDING');
```

   Confirm: "Can write and read from trinity_tasks table"

5. UPDATE YOUR OWN CODE
   - Store Supabase credentials in your .env
   - Update your task polling to check trinity_tasks every 20 minutes
   - Update agent_status with your heartbeat every 5 minutes
   - Test: Pull one task, mark it IN_PROGRESS, complete it, mark COMPLETED

6. DOCUMENT WHAT YOU DID
   Create GitHub file: `SCHEMA_FIX_LOG.md` with:
   - What was broken
   - What you fixed
   - How to verify it's working
   - SQL commands used
   - Test results

SUCCESS CRITERIA:
✅ trinity_tasks table exists and accepts writes
✅ agent_status table exists and accepts writes  
✅ HDM can read pending tasks from Supabase
✅ HDM updates agent_status with heartbeat
✅ Test task created, read, and completed successfully
✅ Documentation in GitHub

REPORT BACK WITH:
"SCHEMA FIX COMPLETE - [X] tasks in queue, [Y] tests passed"

If you get stuck, post specific error message to GitHub with "BLOCKER:" prefix.

Start immediately. Clock is ticking.